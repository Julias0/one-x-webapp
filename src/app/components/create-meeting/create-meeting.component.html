<ng-container *ngIf="activeState === 'TEMPLATE'">
  <h1>
    Choose a template
  </h1>
  <div class="template-container">
    <ng-container *ngFor="let template of templates;let i = index">
      <nz-card class="template-card" (mouseenter)="enter(i)" (mouseleave)="leave(i)">
        <h3>
          {{template.header}}
        </h3>
        <p>{{template.content}}</p>
        <div class="card-ctas" *ngIf="hoverIndex === i">
          <button (click)="selectTemplate(template)" nz-button nzType="primary">Apply Template</button>
          <button (click)="previewTempalte(template)" nz-button nzType="default">Preview Template</button>
        </div>
      </nz-card>
    </ng-container>
  </div>
</ng-container>

<ng-container *ngIf="activeState === 'PREVIEW'">
  <ng-container *ngIf="previewTemplate">
    <h1 class="preview-header">
      <button (click)="goBack()" nz-button nzType="text"><i nz-icon nzType="arrow-left" nzTheme="outline"></i></button>
      {{previewTemplate.header}}
    </h1>
    <p>
      {{previewTemplate.longContent}}
    </p>
    <div>
      <ul>
        <li *ngFor="let question of previewTemplate.questions">
          <h4>
            {{question}}
          </h4>
        </li>
      </ul>
    </div>
    <button class="proceed-btn" nz-button nzType="primary" (click)="proceedWithPreviewedTemplate()">Proceed</button>
    <button nz-button nzType="default" (click)="goBack()">Go Back</button>

  </ng-container>
</ng-container>

<ng-container *ngIf="activeState === 'DETAILS'">
  <h1 class="details-header">
    <button (click)="goBack()" nz-button nzType="text"><i nz-icon nzType="arrow-left" nzTheme="outline"></i></button>
    Please enter your meeting details
  </h1>
  <ng-container *ngIf="fg">
    <form nz-form [formGroup]="fg" (ngSubmit)="submitForm()">
      <div class="details-body">
        <nz-form-item>
          <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired>Name</nz-form-label>
          <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Meeting name is required!">
            <input nz-input formControlName="name" />
          </nz-form-control>
        </nz-form-item>
        <ng-container formArrayName="meetingItems">
          <ng-container *ngFor="let meetingItem of meetingItems.controls; let i = index">
            <nz-divider></nz-divider>
            <div [formGroup]="cast(meetingItem)">
              <nz-form-item>
                <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired>Question</nz-form-label>
                <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Question is required!">
                  <textarea rows="4" nz-input formControlName="question"></textarea>
                </nz-form-control>
              </nz-form-item>

              <nz-form-item>
                <nz-form-label [nzSm]="6" [nzXs]="24">Notes</nz-form-label>
                <nz-form-control [nzSm]="14" [nzXs]="24">
                  <textarea rows="4" nz-input formControlName="notes"></textarea>
                </nz-form-control>
              </nz-form-item>

              <nz-form-item>
                <nz-form-label [nzSm]="6" [nzXs]="24">Next Steps</nz-form-label>
                <nz-form-control [nzSm]="14" [nzXs]="24">
                  <nz-select formControlName="nextSteps" nzMode="tags" [nzTokenSeparators]="[',']"
                    nzPlaceHolder="enter next steps separated by commas">
                  </nz-select>
                </nz-form-control>
              </nz-form-item>
            </div>
          </ng-container>
        </ng-container>
      </div>
      <nz-form-item class="details-footer">
        <nz-form-control [nzSpan]="8" [nzOffset]="4">
          <button nz-button nzType="primary">Save Meeting Details</button>
        </nz-form-control>
      </nz-form-item>
    </form>
  </ng-container>
</ng-container>